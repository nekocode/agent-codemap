; ============================================================
; Ruby Codemap Query
; ============================================================

; ------------------------------------------------------------
; 类定义
; ------------------------------------------------------------
(class
  name: (constant) @name) @definition.class

; ------------------------------------------------------------
; 模块定义
; ------------------------------------------------------------
(module
  name: (constant) @name) @definition.module

; ------------------------------------------------------------
; 方法定义
; ------------------------------------------------------------
(method
  name: (identifier) @name) @definition.method

; 单例方法 (类方法)
(singleton_method
  name: (identifier) @name) @definition.method

; ------------------------------------------------------------
; 类变量 (@@var)
; ------------------------------------------------------------
(assignment
  left: (class_variable) @name) @definition.variable

; ------------------------------------------------------------
; 实例变量 (@var)
; ------------------------------------------------------------
(assignment
  left: (instance_variable) @name) @definition.property

; ------------------------------------------------------------
; 常量赋值
; ------------------------------------------------------------
(assignment
  left: (constant) @name) @definition.constant

; ------------------------------------------------------------
; attr_accessor 等
; ------------------------------------------------------------
(call
  method: (identifier) @_method
  arguments: (argument_list
    (simple_symbol) @name) @definition.property
  (#match? @_method "^attr_(reader|writer|accessor)$"))

; ------------------------------------------------------------
; 别名方法
; ------------------------------------------------------------
(alias
  name: (simple_symbol) @name) @definition.method
